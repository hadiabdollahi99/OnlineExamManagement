<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Ù‡Ù…Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù…Ù†</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        .menu { background: #333; padding: 10px; margin-bottom: 20px; }
        .menu a { color: white; margin: 0 10px; text-decoration: none; }
        .menu form { color: white; margin: 0 10px; text-decoration: none;}
        .header {
            background: #f8f9fa;
            padding: 20px;
            margin-bottom: 20px;
            border-right: 4px solid #007bff;
        }

        .course-section {
            margin: 30px 0;
            border: 1px solid #ddd;
            padding: 15px;
            background: white;
        }
        .course-title {
            color: #333;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        .exam-table {
            width: 100%;
            border-collapse: collapse;
        }
        .exam-table th, .exam-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: right;
        }
        .exam-table th {
            background: #f8f9fa;
        }

        .btn { padding: 8px 15px; text-decoration: none; color: white; margin: 5px; display: inline-block;}
        .btn-view { background: #007bff; }
        .btn-edit { background: #ffc107; color: black; }
        .btn-delete { background: #dc3545; }
        .btn-question { background: #28a745; color: white;}


        .no-exams {
            text-align: center;
            padding: 40px;
            color: #666;
            background: #f9f9f9;
            border: 1px dashed #ddd;
        }

        form {
            display: inline;
        }
    </style>
</head>
<body>
<div class="menu">
    <a href="/teacher/dashboard">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a>
    <a href="/teacher/courses">Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ¹Ù„ÛŒ</a>
    <a href="/teacher/my-exams">Ù‡Ù…Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù…Ù†</a>
    <form th:action="@{/logout}" method="post">
        <button type="submit">Ø®Ø±ÙˆØ¬</button>
    </form></div>

<div class="header">
    <h2>ğŸ“š Ù‡Ù…Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù…Ù†</h2>
</div>

<div th:if="${myExams.empty}" class="no-exams">
    <p>Ø´Ù…Ø§ Ù‡Ù†ÙˆØ² Ù‡ÛŒÚ† Ø¢Ø²Ù…ÙˆÙ†ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.</p>
    <p>Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯ØŒ Ø¨Ù‡ ØµÙØ­Ù‡ "Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ¹Ù„ÛŒ" Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯.</p>
    <a href="/teacher/courses" style="background: #28a745; color: white; padding: 10px; text-decoration: none;">
        Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ¹Ù„ÛŒ
    </a>
</div>

<div th:each="entry : ${examsGroupedByCourse}">
    <div class="course-section">
        <h3 class="course-title">
            <span th:text="${entry.key.title}"></span>
            <small style="color: #666;">(Ú©Ø¯: <span th:text="${entry.key.courseCode}"></span>)</small>
            <span style="color: #28a745; font-size: 14px;">
                    - <span th:text="${entry.value.size()}"></span> Ø¢Ø²Ù…ÙˆÙ†
                </span>
        </h3>

        <table class="exam-table">
            <thead>
            <tr>
                <th>Ø¹Ù†ÙˆØ§Ù† Ø¢Ø²Ù…ÙˆÙ†</th>
                <th>ØªÙˆØ¶ÛŒØ­Ø§Øª</th>
                <th>Ø²Ù…Ø§Ù† (Ø¯Ù‚ÛŒÙ‚Ù‡)</th>
                <th>ØªØ¹Ø¯Ø§Ø¯ Ø³ÙˆØ§Ù„Ø§Øª</th>
                <th>ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯</th>
                <th>ÙˆØ¶Ø¹ÛŒØª</th>
                <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="exam : ${entry.value}">
                <td th:text="${exam.title}"></td>
                <td>
                            <span th:if="${exam.description != null}"
                                  th:text="${#strings.length(exam.description) > 50 ? #strings.substring(exam.description, 0, 50) + '...' : exam.description}"></span>
                    <span th:unless="${exam.description != null}">-</span>
                </td>
                <td th:text="${exam.durationMinutes}"></td>
                <td th:text="0"></td>
                <td th:text="${#temporals.format(exam.createdAt, 'yyyy/MM/dd')}"></td>
                <td>
                    <span th:if="${exam.isActive}" style="color: green;">ÙØ¹Ø§Ù„</span>
                    <span th:unless="${exam.isActive}" style="color: red;">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                </td>
                <td>
                    <a th:href="@{/teacher/my-exams/{id}(id=${exam.id})}"
                       class="btn btn-view">ğŸ‘ï¸ Ù…Ø´Ø§Ù‡Ø¯Ù‡</a>
                    <a th:href="@{/teacher/my-exams/{id}/edit(id=${exam.id})}"
                       class="btn btn-edit">âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´</a>
                    <a th:href="@{/teacher/questions/exam/{id}(id=${exam.id})}"
                       class="btn btn-question">
                        ğŸ“ Ø³ÙˆØ§Ù„Ø§Øª
                    </a>


                    <form th:action="@{/teacher/exams/{id}/delete(id=${exam.id})}" method="post">
                        <button type="submit" class="btn btn-delete"
                                onclick="return confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ† Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')">
                            ğŸ—‘ï¸ Ø­Ø°Ù
                        </button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div style="margin-top: 30px; padding: 15px; background: #f8f9fa; text-align: center;">
    <p>
        <strong>Ø¢Ù…Ø§Ø±:</strong>
        Ø´Ù…Ø§ Ø¯Ø± Ù…Ø¬Ù…ÙˆØ¹ <strong th:text="${myExams.size()}"></strong> Ø¢Ø²Ù…ÙˆÙ† Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯
        Ú©Ù‡ Ø¯Ø± <strong th:text="${examsGroupedByCourse.size()}"></strong> Ø¯ÙˆØ±Ù‡ Ù…Ø®ØªÙ„Ù Ù‡Ø³ØªÙ†Ø¯.
    </p>
</div>
</body>
</html>